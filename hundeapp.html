<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HundeApp</title>
    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        padding: 20px;
      }

      .card {
        border: 1px solid #ddd;
        padding: 15px;
        margin: 10px;
        width: 200px;
        text-align: center;
        margin-bottom: 100px;
      }

      .card img {
        max-width: 50%;
        border-radius: 10%;
      }
    </style>
  </head>
  <body>
    <div id="chatPopup" class="chat-popup" style="display:none;"></div>


    <script>
      let dogImages, profilies;
      let filter = false;

      const fetchDogData = async (num) => {
        //fetchDogData is a function that takes a number as an argument
        const response = await fetch(`https://dog.ceo/api/breeds/image/${num}`);
        const data = await response.json();
        dogImages = data.message;
      };

      const fetchUserData = async (num) => {
        //fetchUserData is a function that takes a number as an argument
        const response = await fetch(
          `http://randomuser.me/api/inc=name,location,picture&results=${num}`
        );
        const data = await response.json();
        profiles = data.results;
      };

      const fetchBasedOnDogBreed = async (num) => {
        //fetchBasedOnDogBreed is a function that takes a number as an argument
        const response = await fetch(
          `https://dog.ceo/api/breed/${num}/images/random/5`
        );
        const data = await response.json();
        dogImages = data.message;
      };

      const createProfileCard = (dogImages, profile, index) => {
        const card = document.createElement("div");
        card.classList.add("card");

        const dogImgElement = document.createElement("img");
        dogImgElement.src = dogImage;
        card.appendChild(dogImgElement);

        const profileImgElement = document.createElement("img");
        profileImgElement.src = profile.picture.medium;
        card.appendChild(profileImgElement);

        const nameElement = document.createElement("p");
        nameElement.textContent = `${profile.name.title} ${profile.name.first} ${profile.name.last}`;
        card.appendChild(nameElement);

        const residenceElement = document.createElement("p");
        residenceElement.textContent = `${profile.location.city}, ${profile.location.country}`;
        card.appendChild(residenceElement);
        if(!filter){
        }
        document.body.appendChild(card);
      };

      //--- S ---//
     const removeAllCards = () => {
      const cards = document.querySelectorAll(`.card`);
      cards.forEach(card => card.remove());
     };

     const showNewCards = async () => {
      removeAllCards();
      await loadData();
     }

      const loadData = async () => {
        filter = false;
        try {
          await Promise.all([fetchDogData(10), fetchUserData(10)]);

          for (let i = 0; i < 10; i++) {
            createProfileCard(dogImages[i], profiles[i],i);
          }
        } catch (error) {
          console.error(`Feil under henting av data:`, error);
        }
      };

      const loadNewCard = async () => {
        try {
          const [newDogImage, newProfile] = await Promise.all([fetchDogData(1), fetchUserData(1)]);
          dogImages.push(newDogImage);
          profiles.push(newProfile);

          for (let i = 0; i < 10; i++) {
            createProfileCard(dogImages[i], profiles[i],i);
          }
        } catch (error) {
          console.error(`Feil under henting av nye data`, error);
          }
      };
      const captureDropdownValue = async () => {
        const dropdown = document.getElementById(`breedDropdown`);
        const selectedBreed = dropdown.value;
        dogImages = [];
        profiles = [];
        filter = true;
        removeAllCards();

        if (selectedBreed === "any") {
          loadData();
        } else {
          try {
            await Promise.all([fetchBasedOnDogBreed(selectedBreed), fetchUserData(5)]);

            for (let i = 0; i < 5; i++) {
              createProfileCard(dogImages[i], profiles[i], i);
            }
          } catch (error) {
            console.error(`Feil ved henting av nye data:`, error);
          }
        }
      };
      function toggleChatPopup() {
        const chatPopup = document.getElementById(`chatPopup`);
        chatPopup.style.display = chatPopup.style.display === `block` ? `none` : `block`;
      }
    </script>
  </body>
</html>
